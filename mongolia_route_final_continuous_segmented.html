<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <script>
        L_NO_TOUCH = false;
        L_DISABLE_3D = false;
    </script>
    <style>
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            right: 0;
            left: 0;
        }
        
        /* 資訊面板樣式 */
        .info-panel {
            position: fixed;
            z-index: 9999;
            background: rgba(255,255,255,0.96);
            padding: 18px 20px;
            border-radius: 18px;
            border: 2px solid rgba(0,0,0,0.15);
            box-shadow: 0 4px 14px rgba(0,0,0,0.25);
            font-family: Arial, sans-serif;
            overflow: auto;
            box-sizing: border-box;
        }
        
        /* 桌面版：右上角固定 */
        @media (min-width: 769px) {
            .info-panel {
                top: 20px;
                right: 20px;
                width: 420px;
                max-height: 82%;
            }
        }
        
        /* 手機版：底部抽屜式 */
        @media (max-width: 768px) {
            .info-panel {
                bottom: 0;
                left: 0;
                right: 0;
                width: 100%;
                max-height: 45vh;
                border-radius: 18px 18px 0 0;
                padding: 14px 16px;
                padding-bottom: 20px;
            }
            
            .info-panel::before {
                content: '';
                display: block;
                width: 40px;
                height: 4px;
                background: #ccc;
                border-radius: 2px;
                margin: 0 auto 12px auto;
            }
            
            .panel-title {
                font-size: 16px !important;
            }
            
            .segment-title {
                font-size: 14px !important;
            }
            
            .day-item {
                margin-bottom: 6px !important;
            }
            
            .day-header {
                font-size: 13px !important;
            }
            
            .day-location {
                font-size: 13px !important;
            }
            
            .day-activities {
                font-size: 12px !important;
            }
            
            .total-distance {
                font-size: 16px !important;
            }
        }
        
        .panel-title {
            font-size: 18px;
            font-weight: 950;
            margin-bottom: 8px;
        }
        
        .segment-title {
            margin-top: 14px;
            font-size: 16px;
            font-weight: 900;
        }
        
        .segment-gobi { color: #d94f2b; }
        .segment-naadam { color: #6a3fbf; }
        .segment-north { color: #1f7a4c; }
        
        .day-item {
            margin-bottom: 8px;
        }
        
        .day-header {
            font-weight: 800;
            font-size: 14px;
        }
        
        .day-location {
            font-weight: 700;
            font-size: 14px;
        }
        
        .day-activities {
            font-size: 13px;
            opacity: 0.85;
        }
        
        .total-distance {
            font-weight: 900;
            font-size: 20px;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #ddd;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
</head>
<body>

<div class="info-panel">
    <div class="panel-title">Mongolia Expedition Overview</div>

    <div class="segment-title segment-gobi">GOBI SEGMENT</div>
    
    <div class="day-item">
        <div class="day-header">Day 1 · 2026-07-07</div>
        <div class="day-location segment-gobi">Ulaanbaatar</div>
        <div class="day-activities">City tour: National Museum · Gandan Monastery · Zaisan Monument · Welcome dinner</div>
    </div>
    
    <div class="day-item">
        <div class="day-header">Day 2 · 2026-07-08</div>
        <div class="day-location segment-gobi">Terelj National Park</div>
        <div class="day-activities">Chinggis Statue · Turtle Rock · Ariyabal Temple hike · Stargazing (yurt)</div>
    </div>
    
    <div class="day-item">
        <div class="day-header">Day 3 · 2026-07-09</div>
        <div class="day-location segment-gobi">Baga Gazriin Chuluu</div>
        <div class="day-activities">Rock formations hike · Photography · Nomad camp · Stargazing</div>
    </div>
    
    <div class="day-item">
        <div class="day-header">Day 4 · 2026-07-10</div>
        <div class="day-location segment-gobi">Yol Valley</div>
        <div class="day-activities">Tsagaan Suvarga stop · Scenic drive · Evening rest (yurt)</div>
    </div>
    
    <div class="day-item">
        <div class="day-header">Day 5 · 2026-07-11</div>
        <div class="day-location segment-gobi">Gobi Sand Dunes</div>
        <div class="day-activities">Hike · Short horse ride · Camel riding · Sunset photography</div>
    </div>
    
    <div class="day-item">
        <div class="day-header">Day 6 · 2026-07-12</div>
        <div class="day-location segment-gobi">Ulaanbaatar</div>
        <div class="day-activities">Return drive · Hotel stay</div>
    </div>

    <div class="segment-title segment-naadam">NAADAM SEGMENT</div>
    
    <div class="day-item">
        <div class="day-header">Day 7 · 2026-07-13</div>
        <div class="day-location segment-naadam">Ulaanbaatar</div>
        <div class="day-activities">Naadam Festival: horse racing · wrestling · cultural events</div>
    </div>
    
    <div class="day-item">
        <div class="day-header">Day 8 · 2026-07-14</div>
        <div class="day-location segment-naadam">Ulaanbaatar</div>
        <div class="day-activities">Rest day · Shopping · Preparation</div>
    </div>
    
    <div class="day-item">
        <div class="day-header">Day 9 · 2026-07-15</div>
        <div class="day-location segment-naadam">Ulaanbaatar</div>
        <div class="day-activities">Archery experience · Bogd Khan Museum · Evening concert</div>
    </div>

    <div class="segment-title segment-north">NORTH SEGMENT</div>
    
    <div class="day-item">
        <div class="day-header">Day 10 · 2026-07-16</div>
        <div class="day-location segment-north">Mini Gobi (Khustai / Elsen Tasarkhai)</div>
        <div class="day-activities">Przewalski's horses · Dunes · Camel · Stargazing (tent)</div>
    </div>
    
    <div class="day-item">
        <div class="day-header">Day 11 · 2026-07-17</div>
        <div class="day-location segment-north">Orkhon Valley</div>
        <div class="day-activities">Nomad family stay · Hiking · Photography</div>
    </div>
    
    <div class="day-item">
        <div class="day-header">Day 12 · 2026-07-18</div>
        <div class="day-location segment-north">Orkhon Valley</div>
        <div class="day-activities">Nomad life experience · Extensive horse riding</div>
    </div>
    
    <div class="day-item">
        <div class="day-header">Day 13 · 2026-07-19</div>
        <div class="day-location segment-north">Great White Lake (Khorgo)</div>
        <div class="day-activities">Khorgo Volcano · Camping · Cooking outdoors</div>
    </div>
    
    <div class="day-item">
        <div class="day-header">Day 14 · 2026-07-20</div>
        <div class="day-location segment-north">Shine‑Ider</div>
        <div class="day-activities">Scenic mountain/forest drive · Camping</div>
    </div>
    
    <div class="day-item">
        <div class="day-header">Day 15 · 2026-07-21</div>
        <div class="day-location segment-north">Lake Khövsgöl</div>
        <div class="day-activities">Supplies stop · Guesthouse stay</div>
    </div>
    
    <div class="day-item">
        <div class="day-header">Day 16 · 2026-07-22</div>
        <div class="day-location segment-north">Reindeer Tribe Area</div>
        <div class="day-activities">Boat ride · Reindeer tribe visit</div>
    </div>
    
    <div class="day-item">
        <div class="day-header">Day 17 · 2026-07-23</div>
        <div class="day-location segment-north">Bulgan Province</div>
        <div class="day-activities">Nomad family · Horse riding · Airag tasting</div>
    </div>
    
    <div class="day-item">
        <div class="day-header">Day 18 · 2026-07-24</div>
        <div class="day-location segment-north">Bulgan Province</div>
        <div class="day-activities">Rest · Nomad life · Archery attempt</div>
    </div>
    
    <div class="day-item">
        <div class="day-header">Day 19 · 2026-07-25</div>
        <div class="day-location segment-north">Erdenet</div>
        <div class="day-activities">City exploration · Laundry · Local Naadam (if available)</div>
    </div>
    
    <div class="day-item">
        <div class="day-header">Day 20 · 2026-07-26</div>
        <div class="day-location segment-north">Amarbayasgalant</div>
        <div class="day-activities">Historic monastery visit · Camping</div>
    </div>
    
    <div class="day-item">
        <div class="day-header">Day 21 · 2026-07-27</div>
        <div class="day-location segment-north">Ulaanbaatar</div>
        <div class="day-activities">Return drive · Coffee stops · Hotel</div>
    </div>
    
    <div class="day-item">
        <div class="day-header">Day 22 · 2026-07-28</div>
        <div class="day-location segment-north">Departure</div>
        <div class="day-activities">Transfer to Chinggis Khaan International Airport</div>
    </div>

    <div class="total-distance">Total Distance ≈ 3,085 km</div>
</div>

<div id="map_main"></div>

<script>
    var map = L.map("map_main", {
        center: [47.5, 103.5],
        crs: L.CRS.EPSG3857,
        zoom: 5,
        zoomControl: true,
        preferCanvas: false,
    });

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution: 'Data by &copy; <a href="http://openstreetmap.org">OpenStreetMap</a>',
        detectRetina: false,
        maxNativeZoom: 18,
        maxZoom: 18,
        minZoom: 0,
        noWrap: false,
        opacity: 1,
        subdomains: "abc",
        tms: false
    }).addTo(map);

    // Route coordinates
    var routeCoords = [
        [47.92123, 106.918556], [48.1502, 107.576], [46.19858, 106.03066], 
        [43.495899, 104.082542], [43.7333, 102.333], [47.92123, 106.918556], 
        [47.92123, 106.918556], [47.92123, 106.918556], [47.92123, 106.918556], 
        [47.3321, 103.6831], [47.554, 102.8255], [47.554, 102.8255], 
        [48.1692, 99.72], [48.9422, 99.534], [50.437, 100.157], 
        [51.3527, 99.352], [48.8072, 103.5335], [48.8072, 103.5335], 
        [49.0333, 104.083], [49.4747, 105.0843], [47.92123, 106.918556], 
        [47.8408, 106.77]
    ];

    // Background route
    L.polyline(routeCoords, {
        color: "#444444",
        opacity: 0.6,
        weight: 5
    }).addTo(map);

    // Gobi segment route
    var gobiRoute = [
        [47.92123, 106.918556], [48.1502, 107.576], [46.19858, 106.03066], 
        [43.495899, 104.082542], [43.7333, 102.333], [47.92123, 106.918556]
    ];
    L.polyline(gobiRoute, {
        color: "#d94f2b",
        opacity: 0.85,
        weight: 6
    }).addTo(map);

    // North segment route
    var northRoute = [
        [47.3321, 103.6831], [47.554, 102.8255], [47.554, 102.8255], 
        [48.1692, 99.72], [48.9422, 99.534], [50.437, 100.157], 
        [51.3527, 99.352], [48.8072, 103.5335], [48.8072, 103.5335], 
        [49.0333, 104.083], [49.4747, 105.0843], [47.92123, 106.918556], 
        [47.8408, 106.77]
    ];
    L.polyline(northRoute, {
        color: "#1f7a4c",
        opacity: 0.85,
        weight: 6
    }).addTo(map);

    // Day markers data
    var days = [
        {day: 1, lat: 47.92123, lng: 106.948556, color: "#d94f2b", location: "Ulaanbaatar", date: "2026-07-07", activities: "City tour: National Museum · Gandan Monastery · Zaisan Monument · Welcome dinner"},
        {day: 2, lat: 48.1502, lng: 107.576, color: "#d94f2b", location: "Terelj National Park", date: "2026-07-08", activities: "Chinggis Statue · Turtle Rock · Ariyabal Temple hike · Stargazing (yurt)"},
        {day: 3, lat: 46.19858, lng: 106.03066, color: "#d94f2b", location: "Baga Gazriin Chuluu", date: "2026-07-09", activities: "Rock formations hike · Photography · Nomad camp · Stargazing"},
        {day: 4, lat: 43.495899, lng: 104.082542, color: "#d94f2b", location: "Yol Valley", date: "2026-07-10", activities: "Tsagaan Suvarga stop · Scenic drive · Evening rest (yurt)"},
        {day: 5, lat: 43.7333, lng: 102.333, color: "#d94f2b", location: "Gobi Sand Dunes", date: "2026-07-11", activities: "Hike · Short horse ride · Camel riding · Sunset photography"},
        {day: 6, lat: 47.947, lng: 106.933, color: "#d94f2b", location: "Ulaanbaatar", date: "2026-07-12", activities: "Return drive · Hotel stay"},
        {day: 7, lat: 47.947, lng: 106.903, color: "#6a3fbf", location: "Ulaanbaatar", date: "2026-07-13", activities: "Naadam Festival: horse racing · wrestling · cultural events"},
        {day: 8, lat: 47.921, lng: 106.888, color: "#6a3fbf", location: "Ulaanbaatar", date: "2026-07-14", activities: "Rest day · Shopping · Preparation"},
        {day: 9, lat: 47.895, lng: 106.903, color: "#6a3fbf", location: "Ulaanbaatar", date: "2026-07-15", activities: "Archery experience · Bogd Khan Museum · Evening concert"},
        {day: 10, lat: 47.3321, lng: 103.6831, color: "#1f7a4c", location: "Mini Gobi (Khustai / Elsen Tasarkhai)", date: "2026-07-16", activities: "Przewalski's horses · Dunes · Camel · Stargazing (tent)"},
        {day: 11, lat: 47.554, lng: 102.855, color: "#1f7a4c", location: "Orkhon Valley", date: "2026-07-17", activities: "Nomad family stay · Hiking · Photography"},
        {day: 12, lat: 47.554, lng: 102.795, color: "#1f7a4c", location: "Orkhon Valley", date: "2026-07-18", activities: "Nomad life experience · Extensive horse riding"},
        {day: 13, lat: 48.1692, lng: 99.72, color: "#1f7a4c", location: "Great White Lake (Khorgo)", date: "2026-07-19", activities: "Khorgo Volcano · Camping · Cooking outdoors"},
        {day: 14, lat: 48.9422, lng: 99.534, color: "#1f7a4c", location: "Shine-Ider", date: "2026-07-20", activities: "Scenic mountain/forest drive · Camping"},
        {day: 15, lat: 50.437, lng: 100.157, color: "#1f7a4c", location: "Lake Khövsgöl", date: "2026-07-21", activities: "Supplies stop · Guesthouse stay"},
        {day: 16, lat: 51.3527, lng: 99.352, color: "#1f7a4c", location: "Reindeer Tribe Area", date: "2026-07-22", activities: "Boat ride · Reindeer tribe visit"},
        {day: 17, lat: 48.8072, lng: 103.563, color: "#1f7a4c", location: "Bulgan Province", date: "2026-07-23", activities: "Nomad family · Horse riding · Airag tasting"},
        {day: 18, lat: 48.8072, lng: 103.503, color: "#1f7a4c", location: "Bulgan Province", date: "2026-07-24", activities: "Rest · Nomad life · Archery attempt"},
        {day: 19, lat: 49.0333, lng: 104.083, color: "#1f7a4c", location: "Erdenet", date: "2026-07-25", activities: "City exploration · Laundry · Local Naadam (if available)"},
        {day: 20, lat: 49.4747, lng: 105.0843, color: "#1f7a4c", location: "Amarbayasgalant", date: "2026-07-26", activities: "Historic monastery visit · Camping"},
        {day: 21, lat: 47.895, lng: 106.933, color: "#1f7a4c", location: "Ulaanbaatar", date: "2026-07-27", activities: "Return drive · Coffee stops · Hotel"},
        {day: 22, lat: 47.8408, lng: 106.77, color: "#1f7a4c", location: "Departure", date: "2026-07-28", activities: "Transfer to Chinggis Khaan International Airport"}
    ];

    // Create markers
    days.forEach(function(d) {
        var icon = L.divIcon({
            className: 'empty',
            html: '<div style="width:42px;height:42px;border-radius:21px;background:' + d.color + ';border:3px solid white;box-shadow:0 3px 8px rgba(0,0,0,0.35);display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:900;color:white;">' + d.day + '</div>'
        });
        
        var marker = L.marker([d.lat, d.lng], {icon: icon}).addTo(map);
        
        marker.bindPopup('<b>Day ' + d.day + '</b> · ' + d.date + '<br><b>' + d.location + '</b><br>' + d.activities);
        marker.bindTooltip('<div>Day ' + d.day + '</div>', {sticky: true});
    });

    // Fit bounds
    map.fitBounds(routeCoords);
</script>
</body>
</html>
